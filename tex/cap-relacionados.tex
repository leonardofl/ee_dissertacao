
\chapter{Trabalhos relacionados}
\label{cap:relacionados}

\todo{Verificar revisão Gerosa}

Neste capítulo apresentamos os trabalhos relacionados à nossa pesquisa e algumas ferramentas utilizadas pela comunidade referentes à implantação automatizada de serviços. 

A automação do processo de implantação requer uma descrição formal do sistema a ser implantado, contendo as informações necessárias para sua instanciação. Portanto, um dos aspectos fundamentais de um processo de implantação automatizado é a linguagem de configuração utilizada para definir o processo de implantação. Essa linguagem pode ser procedimental~\cite{Dolstra2005Configuration} ou declarativa~\cite{Magee1996Dynamic, Balter1998Olan}. Outro aspecto relevante é o escalonamento de recursos computacionais para os serviços a serem implantados, o que pode ser feito, por exemplo, com o auxílio de sistemas de computação em grade~\cite{Watson2006Dynasoar}.

Antes de instalar um serviço é preciso configurar adequadamente o sistema operacional e a plataforma na qual o serviço será implantado. Para utilizar ferramentas como Chef\footnote{\url{http://www.opscode.com/chef}}, Capistrano\footnote{\url{https://github.com/capistrano}} e Nix~\cite{Dolstra2005Configuration}, os usuários devem escrever \textit{scripts} que realizem a configuração do ambiente e a implantação do serviço. No caso do Chef, um \textit{script} configura a máquina na qual o serviço é instalado, enquanto que o Capistrano possibilita a coordenação da implantação de serviços em diferentes nós. Com as expressões do Nix, é possível também unificar a especificação da implantação com o \textit{build} da aplicação em um único \textit{script}, possibilitando a edição parametrizada de arquivos de configuração da aplicação em função do local de implantação. 

A abordagem procedimental, com \textit{scripts}, permite ao usuário especificar a implantação de praticamente qualquer tipo de sistema, mas normalmente requer especialização de seus usuários, pois todos os detalhes do processo devem ser especificados. Esses \textit{scripts} de implantação também deveriam ser desenvolvidos com o mesmo rigor do código da aplicação, inclusive com o uso de testes automatizados~\cite{Humble2011Continuous}. O descumprimento dessa recomendação torna o processo de implantação pouco robusto e até mesmo não confiável. Uma alternativa que evita essa sobrecarga no processo de desenvolvimento é o uso de sistemas especializados na implantação de determinados tipos de aplicações e que recebam, como entrada, uma simples especificação declarativa do sistema a ser implantado.

Um exemplo de abordagem declarativa é uso de Linguagens de Descrição Arquitetural (ADLs), como a Darwin~\cite{Magee1996Dynamic}. ADLs são uma evolução do conceito de Linguagens de Interconexão de Módulo (MILs)~\cite{DeRemer1976Programming}, que descrevem a interconexão entre módulos de um sistema. A motivação dos autores da MIL era contribuir com novas formas de se produzir software de grande porte, diferenciando essa atividade da programação de pequenos algoritmos. De forma similar, a linguagem Darwin concentra-se nos aspectos estruturais de sistemas distribuídos, descrevendo a conexão entre os módulos do sistema, mas sem descrever implementações ou sequências de interações entre os módulos. Em nosso trabalho, também descrevemos o sistema a ser implantado através de sua descrição estrutural, uma vez que é esse o aspecto necessário para que se possa automatizar o processo de implantação. Magee e Kramer demonstraram a utilidade prática da linguagem Darwin ao utilizá-la de forma integrada a componentes CORBA~\cite{Magee1997Corba}, padrão de interoperabilidade de sistemas distribuídos dominante no mercado à época. Darwin possui também um ambiente de execução, Regis~\cite{Magee1994Regis}, que realiza a implantação dos sistemas descritos em Darwin. Regis possui duas políticas de distribuição de programas por estações de trabalho. A primeira é o mapeamento definido pelo usuário de forma estática, abordagem não apropriada para ambientes de computação em nuvem. A segunda opção de política é a alocação automática em função da carga na CPU das estações de trabalho, não havendo flexibilidade para a consideração de outros recursos, como espaço em disco ou memória, por exemplo. Uma similaridade entre Regis e o \ee\ desenvolvido em nossa pesquisa é o uso do middleware para o envio de mensagens contendo referências remotas dos componentes implantados para que eles possam estabelecer ligações dinâmicas entre si.

Olan~\cite{Balter1998Olan} é um ambiente para a descrição, configuração e implantação de aplicações distribuídas em ambientes heterogêneos, e que também utiliza uma ADL própria. Baseando-se na entrada descrita na ADL, Olan gera \textit{scripts} de Configuração de Máquina, que definem a execução do processo de implantação dos componentes no ambiente distribuído e do ajuste dos canais de comunicação entre esses componentes. A abordagem de gerar um \textit{script} de configuração a partir de uma especificação declarativa é também implementada pelo \ee. A ADL de Olan também possibilita a especificação de restrições sobre a localização da implantação do componente, porém sem flexibilidade para a adoção de estratégias dinâmicas de alocação de nós.

Apesar de os trabalhos sobre Darwin e Olan já falarem sobre software de ``grande porte'', o que se entendia por grande porte já se alterou significativamente desde a época em que esses trabalhos foram feitos. Uma evidência dessa diferente percepção de escala são os exemplos de aplicações fornecidos no artigo sobre Olan, em que se fala sobre componentes muito granulares, como pedaços de interfaces gráficas, e que não consideram possíveis falhas de comunicação que são comuns na Internet. Além disso, os próprios autores do artigo sobre Olan admitem que não se preocuparam com questões de desempenho. Conforme visto no Capítulo~\ref{cap:escala}, hoje há novos desafios e requisitos que precisam ser considerados na construção de qualquer software de grande escala.

O trabalho de Akkerman et al.~\cite{akkerman2005j2ee} concentra-se na implantação distribuída de componentes da plataforma J2EE, oferecendo ligações entre os componentes e suas dependências, especificados por uma ADL, e replicação dos componentes para fins de escalabilidade. No entanto, a solução apresentada para o gerenciamento do processo de implantação baseia-se numa aplicação de interface gráfica, o que dificulta a automação completa do processo. Outros trabalhos, como o de Lan et al.~\cite{lan2005architecture}, também tratam o processo de implantação como realizado manualmente por um operador humano, enquanto que nosso objetivo é de que o operador tenha apenas que pressionar um botão, conforme advogado por Humble e Farley \cite{Humble2011Continuous}.

O estudo de Quéma et al.~\cite{quema2004hierarchical} é o único encontrado a realizar avaliações empíricas sobre desempenho e escalabilidade do processo de implantação de componentes, além de oferecer tolerância a falhas no processo de implantação. Os autores apresentam uma solução na qual agentes executam de forma distribuída o processo de implantação, comunicando-se de forma assíncrona e hierárquica conforme a estrutura da composição de componentes sendo implantada, que é descrita por uma ADL. Essa estrutura hierárquica, no entanto, é apenas um caso particular das possibilidades na topologia de uma coreografia de serviços, o que impossibilita que essa solução seja diretamente adotada em nosso contexto. Os agentes também possuem propriedades transacionais que garantem a tolerância a falhas do processo de implantação, mas isso não é avaliado no texto. Os autores avaliam o desempenho e escalabilidade do processo de implantação variando a quantidade de componentes, a topologia da composição de componentes e a quantidade de máquinas. Embora o objetivo do método proposto seja a escalabilidade, os autores contentam-se com um crescimento linear no tempo de implantação mesmo quando se aumenta na mesma proporção o número de máquinas disponíveis. Os autores explicam que há uma sobrecarga na manutenção das sessões de comunicação entre os agentes, o que impede que o número de agentes seja muito grande. Esses resultados evidenciam a necessidade de novos processos de implantação que sejam escaláveis e ao mesmo tempo tolerantes a falhas. Além disso, as avaliações feitas utilizam no máximo 111 máquinas em um único aglomerado, o que atualmente fica aquém de cenários de grande escala. 

Os trabalhos anteriores apresentam abordagens simples para o problema da distribuição dos componentes implantados pelas máquinas disponíveis. Já o trabalho de Watson et al., apresenta uma abordagem mais completa para esse problema com o uso de grades computacionais~\cite{Watson2006Dynasoar}. O foco dessa solução está em escolher dinamicamente o provedor de infraestrutura e a máquina em que um serviço web deve ser implantado considerando os requisitos não-funcionais do serviço web. Isso é realizado não somente para a primeira implantação do serviço web, mas também para as replicações que ocorrem quando as instâncias existentes não conseguem mais atender aos requisitos não-funcionais. Uma desvantagem dessa abordagem é a carga adicional gerada pela análise dos requisitos não-funcionais a cada troca de mensagens efetuada pelos serviços implantados. 

Outro trabalho sobre implantação de componentes em um ambiente de grade é o de Lacour et al.~\cite{Lacour2004Corba}, no qual a escolha do nó de implantação é feita dinamicamente de acordo com alguns requisitos do componente. Uma desvantagem desse trabalho é o desenvolvimento específico para componentes CORBA, além de não haver preocupação com falhas no sistema distribuído.

Embora os trabalhos de Watson et al. e Lacour et al. avancem na problemática da distribuição dos serviços, nenhum dos trabalhos analisados considera as potencialidades e desafios dos ambientes de computação em nuvem~\cite{Amazon2012Practices}, que oferecem serviços de infraestrutura para a gerência de recursos virtualizados. Portanto, em nossa pesquisa, procuramos dar um passo além ao explorar como o ambiente de computação em nuvem pode trazer benefícios ao processo de implantação, bem como ao considerar as restrições que esses ambientes impõem, como a falta de previsibilidade dos endereços das máquinas em tempo de configuração do serviço e as falhas da própria plataforma de nuvem.

Uma tendência recente para se atingir os objetivos de uma implantação simples, rápida, automatizada e escalável é a utilização de serviços de computação em nuvem que oferecem Plataforma como um Serviço (PaaS), que se encarregam não só da implantação da aplicação, como também do processo de criação e configuração do ambiente. O Cloud Foundry\footnote{\url{http://www.cloudfoundry.com/}} é um PaaS de código aberto, podendo ser instalado na infraestrutura de uma organização para a oferta de serviços a clientes internos ou externos. O Cloud Foundry suporta uma grande diversidade de linguagens, arcabouços e bancos de dados a serem utilizados pela aplicação. Operadores do Cloud Foundry podem configurá-lo para utilizar diferentes provedores de Infraestrutura como um Serviço (IaaS), desacoplando as escolhas de IaaS e PaaS, o que será também adotado no \ee. O Cloud Foundry tem como objetivo facilitar a implantação de aplicações web, e não a implantação de composições de serviços. Durante a implantação de uma aplicação pelo Cloud Foundry, o operador pode realizar ligações entre a aplicação e serviços tipicamente utilizados por aplicações web, como bancos de dados, que serão criados e configurados pela própria plataforma. Essa escolha deve ser feita dentro de um conjunto fechado de serviços oferecidos (MySQL, MongoDB, etc.). No entanto, ao implantar-se composições de serviços é preciso estabelecer também ligações entre os próprios serviços sendo implantados, cenário não considerado pelos atuais provedores de PaaS.

A Tabela~\ref{tab:relacionados} realiza uma comparação entre os estudos e ferramentas apresentados em relação a características presentes em nossa solução. Os símbolos na tabela possuem os seguintes significados: ``\checkmark{}'' para ``possui a característica'', espaço vazio para ``não possui a característica'', ``+/-'' para ``não possui a característica de forma totalmente satisfatória'' e ``-'' para quando a característica não se aplica ou não foi possível determinar. As características, que formam as colunas da tabela, são listadas a seguir:

\begin{description}
\item [Automatizado:] processo de implantação automatizado;
\item [ADL:] especificação da implantação feita de forma simples e declarativa;
\item [Escala:] implantação escalável e capaz de lidar com os problemas típicos de sistemas de grande escala, principalmente com a falha de componentes de terceiros;
\item [Composições:] solução voltada para a implantação de composições de serviços, ou componentes; a principal implicação desse item é a realização da ligação entre os serviços implantados;
\item [Nuvem:] consideração das potencialidades e desafios trazidos por ambientes de computação em nuvem.
\end{description}

\begin{table}[!t]
\begin{center}
    \begin{tabular}{l c c c c c c}
	 \hline
	 \itshape{Trabalho} & \itshape{Automatizado} & \itshape{ADL} & \itshape{Escala} & \itshape{Composições} & \itshape{Nuvem}  \\ \hline
    \cite{Magee1994Regis, Magee1996Dynamic} & - & \checkmark  &  & \checkmark &  \\
    \cite{Balter1998Olan}   & - & \checkmark &  & \checkmark &  \\
    \cite{quema2004hierarchical}  & \checkmark & \checkmark & +/- & \checkmark &  \\
    \cite{akkerman2005j2ee}   & +/- & \checkmark & - & \checkmark & - \\
    \cite{Lacour2004Corba} & \checkmark & - &  & \checkmark &  \\
    \cite{Dolstra2005Configuration}   & \checkmark &  & - & - &  \\
    \cite{Watson2006Dynasoar}   & \checkmark & - & +/- & \checkmark &  \\
    Chef   & \checkmark &  & - & - & - \\
    Capistrano   & \checkmark &  & - & - & - \\
    Cloud Foundry   & \checkmark & - & \checkmark &  & \checkmark \\
    \ee   & \checkmark & \checkmark & \checkmark & \checkmark & \checkmark \\
    \end{tabular}
  \caption{Tabela comparativa com os trabalhos relacionados}
   \label{tab:relacionados}
\end{center}
\end{table}

No próximo capítulo prosseguimos mostrando como o \ee\ implementa as características descritas. Também mostraremos os resultados de uma avaliação preliminar da escalabilidade do processo de implantação  automatizado pelo \ee.


